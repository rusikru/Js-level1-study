<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
</head>
<body>
	<script type="text/javascript">
		
		function divideToArray(number) {
		let firstNum = parseInt(number % 10);
		let secondNum = parseInt(number % 100 / 10);
		let thirdNum = parseInt(number % 1000 / 100);
		let fourthNum = parseInt(number / 1000);
		return [firstNum, secondNum, thirdNum, fourthNum];
		}
		function generationNumber(){
			let arr = [];
			for(let i = 0; i < 4; i++) {
				countSameNumber = 2;
				arr.push(parseInt(Math.random() * 9));
				while (arr[0] == 0){ //чтобы число не начиналось с нуля
						arr.pop(0);
						arr.push(parseInt(Math.random() * 9));
					}
				for(let j = 0; j < arr.length - 1; j++){
					while(arr[arr.length - 1] == arr[arr.length - countSameNumber]) {//проверка, чтобы новое число не повторилось снова
						arr.pop(arr.length - 1);
						arr.push(parseInt(Math.random() * 9));
					}	
					countSameNumber++;
				}	
			}
			return arr;
		}
		function bullsAndCows(arrayAuto,arrayUser){
			let bullCount = 0;
			let cowCount = 0;
			let minusArray = 1; // отнимаем от массива на быков
				for(i = 0; i <= 3; i++) {
					let minusArraySecondCircle = 1; // отнимаем от массива на коров
					if(arrayUser[arrayUser.length - 1] == arrayAuto[arrayAuto.length - minusArray]) {
						 bullCount++;
					}
					for (j = 0; j <= 3; j++){
						if(arrayUser[arrayUser.length -1] == arrayAuto[arrayAuto.length - minusArraySecondCircle]) {
								cowCount++;
						}
						if(arrayUser.length - 1 == arrayAuto.length - minusArraySecondCircle) { //проверка, чтобы корова не засчиталась, когда засчитывается бык
							if(arrayUser[arrayUser.length -1] == arrayAuto[arrayAuto.length - minusArraySecondCircle]) {
								cowCount--;
							}
						}
						minusArraySecondCircle++;
					}
					arrayUser.splice(arrayUser.length -1, 1);
					minusArray++;
					// arrayAuto.splice(arrayAuto.length -1, 1);
				}
				return [bullCount,cowCount];
		}
		let arrayAutoNumber = generationNumber(1000, 9999);
		for(let attempt = 5; attempt > 0; attempt--) {
			let userAnswer = +prompt ("Введите четырехзначное число. Помните, что число не может начинаться с нуля. Вам всего дается 5 попыток");
			while(userAnswer < 1000 || userAnswer > 9999){
				userAnswer = +prompt ("Вы ввели не четырехзначное число. Введите четырехзначное число");
			}
			let arrayUserAnswer = divideToArray(userAnswer);
			let bullsCows = bullsAndCows(arrayAutoNumber,arrayUserAnswer);
			let bullCase = " ";
			let cowCase = " ";
				//пошел выбор склонения слова исходя из числительного
				switch (bullsCows[0]){
					case 0:
					bullCase = " быков";
					break;
					case 1: 
					bullCase = " бык";
					break;
					default:
					bullCase = " быка";
					break;
				}
				switch (bullsCows[1]){
					case 0:
					cowCase = " коров";
					break;
					case 1: 
					cowCase = " корова";
					break;
					default:
					cowCase = " коровы";
					break;
				}
				if (bullCase == 4) {
					alert("У вас " + bullsCows[0] + bullCase + ". Вы выиграли");
				}	
				alert("У вас " + bullsCows[0] + bullCase + " и " + bullsCows[1] + cowCase + "\nОсталось " + (attempt - 1) + " попыток");	
				if ((attempt-1) == 0){
					alert (" Вы проиграли")
				}
		}
	</script>
</body>
</html>